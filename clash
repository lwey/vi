mode: rule            # clashå·¥ä½œæ¨¡å¼ï¼ˆrule/global/direct,metaæš‚ä¸æ”¯æŒscriptï¼‰
ipv6: false           # ip6å¼€å…³ï¼Œå½“ä¸ºfalseæ—¶ï¼Œåœæ­¢è§£æhostanmesä¸ºip6åœ°å€
log-level: info       # æ—¥å¿—ç­‰çº§ ï¼ˆinfo/warning/error/debug/silentï¼‰
allow-lan: false      # æ˜¯å¦å…è®¸å±€åŸŸç½‘é“¾æ¥(false/true)
unified-delay: false  # çµ±ä¸€å»¶é²
tcp-concurrent: true
external-controller: 127.0.0.1:9236   # å¤–éƒ¨æ§åˆ¶å™¨åœ°å€

clash-for-android:
  append-system-dns: false

profile:
  store-selected: true
  store-fake-ip: true
  tracing: true
  
hosts:
  mtalk.google.com: 108.177.97.188
  
sniffer:
  enable: true
  sniff:
    TLS:
      ports: [443, 8443]
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
  
dns:
  enable: true
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  listen: 127.0.0.1:1853
  
  default-nameserver:  #é»˜è®¤dns, ç”¨äºè§£æ DNS å™¨ çš„åŸŸå
    - "223.5.5.5"
    - "119.29.29.29"
    - "8.8.8.8"
    
  nameserver:  #é»˜è®¤çš„åŸŸåè§£æå™¨ï¼Œå¦‚ä¸é…ç½® fallback/proxy-server-nameserver , åˆ™æ‰€æœ‰åŸŸåéƒ½ç”± nameserver è§£æ
    - "https://doh.pub/dns-query"
    - "https://dns.alidns.com/dns-query"
  
  #proxy-server-nameserver:  #ä»£ç†åŸŸåè§£æå™¨ï¼Œä»…ç”¨äºè§£æä»£ç†çš„åŸŸå
    #- "https://doh.pub/dns-query"
    #- "https://1.0.0.1/dns-query"
    
  fallback:  #åå¤‡åŸŸåè§£æå™¨ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨å¢ƒå¤– DNS, ä¿è¯ç»“æœå¯ä¿¡ï¼Œé…ç½® fallbackåé»˜è®¤å¯ç”¨ fallback-filter,geoip-codeä¸º cn
    - "tls://8.8.4.4:853"
    - "https://dns.cloudflare.com/dns-query"
    - "https://1.1.1.1/dns-query"
    
   # åœ¨ä»¥ä¸‹åˆ—è¡¨çš„åŸŸåå°†ä¸ä¼šè¢«è§£æä¸º fake ipï¼Œè¿™äº›åŸŸåç›¸å…³çš„è§£æè¯·æ±‚å°†ä¼šè¿”å›å®ƒä»¬çœŸå®çš„ IP åœ°å€
  fake-ip-filter:
    - "*.lan"
    - "*.localdomain"
    - "*.example"
    - "*.invalid"
    - "*.localhost"
    - "*.test"
    - "*.local"
    - "*.home.arpa"
    - time.*.com
    - time.*.gov
    - time.*.edu.cn
    - time.*.apple.com
    - time1.*.com
    - time2.*.com
    - time3.*.com
    - time4.*.com
    - time5.*.com
    - time6.*.com
    - time7.*.com
    - ntp.*.com
    - ntp1.*.com
    - ntp2.*.com
    - ntp3.*.com
    - ntp4.*.com
    - ntp5.*.com
    - ntp6.*.com
    - ntp7.*.com
    - "*.time.edu.cn"
    - "*.ntp.org.cn"
    - +.pool.ntp.org
    - time1.cloud.tencent.com
    - stun.*.*
    - stun.*.*.*
    - swscan.apple.com
    - mesu.apple.com
    - music.163.com
    - "*.music.163.com"
    - "*.126.net"
    - musicapi.taihe.com
    - music.taihe.com
    - songsearch.kugou.com
    - trackercdn.kugou.com
    - "*.kuwo.cn"
    - api-jooxtt.sanook.com
    - api.joox.com
    - y.qq.com
    - "*.y.qq.com"
    - streamoc.music.tc.qq.com
    - mobileoc.music.tc.qq.com
    - isure.stream.qqmusic.qq.com
    - dl.stream.qqmusic.qq.com
    - aqqmusic.tc.qq.com
    - amobile.music.tc.qq.com
    - localhost.ptlogin2.qq.com
    - "*.msftconnecttest.com"
    - "*.msftncsi.com"
    - "*.xiami.com"
    - "*.music.migu.cn"
    - music.migu.cn
    - +.wotgame.cn
    - +.wggames.cn
    - +.wowsgame.cn
    - +.wargaming.net
    - "*.*.*.srv.nintendo.net"
    - "*.*.stun.playstation.net"
    - "+.playstation.com"
    - "+.playstation.net"
    - "+.xboxlive.com"
    - "+.microsoft.com" 
    - xbox.*.*.microsoft.com
    - "*.*.xboxlive.com"
    - "*.ipv6.microsoft.com"
    - teredo.*.*.*
    - teredo.*.*
    - speedtest.cros.wr.pvp.net
    - +.jjvip8.com
    - www.douyu.com
    - activityapi.huya.com
    - activityapi.huya.com.w.cdngslb.com
    - www.bilibili.com
    - api.bilibili.com
    - a.w.bilicdn1.com
    
  fallback-filter:     #åå¤‡åŸŸåè§£æå™¨ç­›é€‰ï¼Œæ»¡è¶³æ¡ä»¶çš„å°†ä½¿ç”¨ fallbackç»“æœæˆ–åªä½¿ç”¨ fallbackè§£æ
    geoip: true        #ä¸ºçœŸæ—¶ï¼Œä¸åŒ¹é…ä¸ºgeoipè§„åˆ™çš„ä½¿ç”¨fallbackè¿”å›ç»“æœ
    geoip-code: CN     #geoipåŒ¹é…åŒºåŸŸè®¾å®š
    ipcidr:            #åˆ—è¡¨ä¸­çš„ipä½¿ç”¨fallbackè¿”å›è§£æç»“æœ
      - 240.0.0.0/4
      - 0.0.0.0/32
      - 127.0.0.1/32
    domain:            #åˆ—è¡¨ä¸­çš„åŸŸåä½¿ç”¨fallbackè¿”å›è§£æç»“æœ
      - +.facebook.com
      - +.twitter.com
      - +.google.com
      - +.googleapis.com
      
proxy-providers:
  Sub:
    type: http
    path: ./providers/proxy/Sub.yaml
    url: "http://106.75.143.245:3390/api/v1/client/subscribe?token=4b83c9b85ffb9cf06d86fe5bf1a05d1c"
    interval: 86400
    health-check:
      enable: true
      url: "https://i.ytimg.com/generate_204"
      #url: "http://cp.cloudflare.com/generate_204"
      interval: 1200
    filter: "(?i)United States|ç¾å›½|Hong kong|é¦™æ¸¯|taiwan|å°æ¹¾|Singapore|æ–°åŠ å¡|Japan|æ—¥æœ¬"  #ç­›é€‰åŒ…å«å…³é”®å­—çš„èŠ‚ç‚¹
    #filter: "^(?!.*?æµ·å¤–).*(é¦™æ¸¯|å°æ¹¾|æ—¥æœ¬|æ–°åŠ å¡|ç¾å›½)" #ç­›é€‰åŒ…å«å…³é”®å­—åŠæ’é˜ŸåŒ…å«â€œæµ·å¤–â€çš„èŠ‚ç‚¹
    #exclude-filter: "æµ·å¤–"  #æ’é˜ŸåŒ…å«â€œæµ·å¤–â€çš„èŠ‚ç‚¹
    
#proxiesè‡ªå»º
proxies:
  #- {name: type: ss, server: 111.9.146.195, port: "52173", cipher: chacha20-ietf-poly1305, password: juhwygalmcnbvsenuakypz, udp: true}
  
#proxy-groupsï¼šç­–ç•¥ç»„
proxy-groups:

  - {name: ğŸš€select, type: select, use: [Sub], proxies: [DIRECT]}
  
  - {name: ğŸ“Ÿ Telegram, type: select, proxies: [ ğŸ‡­ğŸ‡°HongKong, ğŸ‡¹ğŸ‡¼Taiwan, ğŸ‡ºğŸ‡¸American, ğŸ‡¸ğŸ‡¬Singapore, ğŸ‡¯ğŸ‡µJapan]}

  - {name: ğŸ¦ Twitter, type: select, proxies: [ğŸ‡­ğŸ‡°HongKong, ğŸ‡¹ğŸ‡¼Taiwan, ğŸ‡ºğŸ‡¸American, ğŸ‡¸ğŸ‡¬Singapore, ğŸ‡¯ğŸ‡µJapan]}
  
  - {name: ğŸ“½ï¸ YouTube, type: select, proxies: [ ğŸ‡­ğŸ‡°HongKong, ğŸ‡¹ğŸ‡¼Taiwan, ğŸ‡ºğŸ‡¸American, ğŸ‡¸ğŸ‡¬Singapore, ğŸ‡¯ğŸ‡µJapan]}
  
  - {name: ğŸ–¥ï¸ å¾®è½¯æœåŠ¡, type: select, proxies: [ğŸ‡­ğŸ‡°HongKong, ğŸ‡¹ğŸ‡¼Taiwan, ğŸ‡ºğŸ‡¸American, ğŸ‡¸ğŸ‡¬Singapore, ğŸ‡¯ğŸ‡µJapan]}
 
  - {name: ğŸ¦ Twitter, type: select, proxies: [ğŸ‡­ğŸ‡°HongKong, ğŸ‡¹ğŸ‡¼Taiwan, ğŸ‡ºğŸ‡¸American, ğŸ‡¸ğŸ‡¬Singapore, ğŸ‡¯ğŸ‡µJapan]}
  
  - {name: ğŸFinal, type: select, proxies: [ğŸš€select, DIRECT]}
  
  - {name: ğŸ‡­ğŸ‡°HongKong, type: url-test, filter: "(?i)é¦™æ¸¯|Hongkong|hong kong", use: [Sub], health-check: {enable: true, url: "https://i.ytimg.com/generate_204", interval: 1200, tolerance: 50}}
  
  - {name: ğŸ‡¹ğŸ‡¼Taiwan, type: url-test, filter: "(?i)å°æ¹¾|Taiwan", use: [Sub], health-check: {enable: true, url: "https://i.ytimg.com/generate_204", interval: 1200, tolerance: 50}}
  
  - {name: ğŸ‡¸ğŸ‡¬Singapore, type: url-test, filter: "(?i)æ–°åŠ å¡|ç‹®åŸ|SG|Singapore", use: [Sub], health-check: {enable: true, url: "https://i.ytimg.com/generate_204", interval: 1200, tolerance: 50}}
  
  - {name: ğŸ‡¯ğŸ‡µJapan, type: url-test, filter: "(?i)æ—¥æœ¬|JP|Japan", use: [Sub], health-check: {enable: true, url: "https://i.ytimg.com/generate_204", interval: 1200, tolerance: 50}}
  
  - {name: ğŸ‡ºğŸ‡¸American, type: url-test, filter: "ğŸ‡ºğŸ‡¸|United States|ç¾å›½", use: [Sub], health-check: {enable: true, url: "https://i.ytimg.com/generate_204", interval: 1200, tolerance: 50}}
  
#rule-providersï¼šè¿œç¨‹åˆ†æµè§„åˆ™
rule-providers:

  Reject: {type: http, behavior: classical, url: "https://raw.githubusercontent.com/yifai/Clash/main/Rules/Reject.yaml", path: ./providers/rule/Reject.yaml, interval: 864000}
  
  China: {type: http,behavior: classical, url: "https://raw.githubusercontent.com/yifai/Clash/main/Rules/China.yaml", path: ./providers/rule/China.yaml, nterval: 864000}
  
  ğŸ“Ÿ Telegram: {type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/Ruleset/Telegram.yaml", path: ./ruleset/Telegram.yaml, interval: 864000}
  
  ğŸ“½ï¸ YouTube: {type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/Ruleset/YouTube.yaml", path: ./ruleset/YouTube.yaml, interval: 864000}
    
  ğŸ–¥ï¸ å¾®è½¯æœåŠ¡: {type: http, behavior: classical, url: "https://raw.githubusercontent.com/yifai/Clash/main/Rules/Microsoft.yaml", path: ./providers/rule/Microsoft.yaml, interval: 864000}
  
  ğŸ¦ Twitter: {type: http, behavior: classical, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/Ruleset/Twitter.yaml", path: ./ruleset/Twitter.yaml, interval: 864000}
    
  Proxy: {type: http, behavior: classical, url: "https://raw.githubusercontent.com/yifai/Clash/main/Rules/Proxylite.yaml", path: ./providers/rule/Proxy.yaml, interval: 864000}
  
# rulesè§„åˆ™ç”±ä¸Šå¾€ä¸‹éå†ï¼Œå¦‚ä¸Šé¢è§„åˆ™å·²ç»å‘½ä¸­ï¼Œåˆ™ä¸å†å¾€ä¸‹å¤„ç†
rules:
  #æœ¬åœ°/å±€åŸŸç½‘
  - DOMAIN-SUFFIX,ip6-localhost,DIRECT,no-resolve
  - DOMAIN-SUFFIX,ip6-loopback,DIRECT,no-resolve
  - DOMAIN-SUFFIX,local,DIRECT,no-resolve
  - DOMAIN-SUFFIX,localhost,DIRECT,no-resolve
  - DOMAIN-SUFFIX,lan,DIRECT,no-resolve
  
  #å…¶å®ƒ
  - PROCESS-NAME,BitComet,DIRECT
  - PROCESS-NAME,qbittorrent,DIRECT
  - DOMAIN-SUFFIX,yowindow.ru,DIRECT
  - DOMAIN-SUFFIX,yowindow.com,DIRECT
  
  # ç­–ç•¥åˆ†æµRULE-SET
  - RULE-SET,Reject,REJECT
  - RULE-SET,ğŸ“Ÿ Telegram,ğŸ“Ÿ Telegram
  - RULE-SET,ğŸ“½ï¸ YouTube,ğŸ“½ï¸ YouTube
  - RULE-SET,ğŸ–¥ï¸ å¾®è½¯æœåŠ¡,ğŸ–¥ï¸ å¾®è½¯æœåŠ¡
  - RULE-SET,ğŸ¦ Twitter,ğŸ¦ Twitter
  - RULE-SET,Proxy,ğŸFinal
  - RULE-SET,China,DIRECT
  
  # GEOIP ï¼Œå¦‚ä½ ä¸å¸Œæœ›è¿›è¡Œ DNS è§£æï¼Œå¯åœ¨ GEOIP è§„åˆ™çš„æœ€ååŠ ä¸Š ,no-resolveï¼Œå¦‚ GEOIP,CN,DIRECT,no-resolveã€‚
  #GEOIPCNï¼ŒChinaIPäºŒé€‰ä¸€
  - GEOIP,CN,DIRECT,no-resolve
  
  # å¿…é¡»ï¼ŒMATCHï¼Œå‰é¢çš„è§„åˆ™éƒ½æ²¡æœ‰å‘½ä¸­ï¼Œèµ°MATCHï¼Œæ”¾åœ¨æœ€åã€‚
  - MATCH,ğŸFinal
