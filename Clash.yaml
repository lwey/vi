##
#ä¿®æ”¹äº2024.6.14
##
http-port: 7890
socks-port: 7891
redir-port: 9797
tproxy-port: 9898
allow-lan: true
ipv6: true
mode: Rule
#mode: direct/rule/global
log-level: warning
#silent/error/warning/info/debug
geodata-mode: true
geodata-loader: memconservative
#standard æ ‡å‡†/ memconservative å†…å­˜å—é™(å°å†…å­˜)è®¾å¤‡ä¼˜åŒ–çš„åŠ è½½å™¨(é»˜è®¤å€¼)
unified-delay: true
tcp-concurrent: true
external-controller: 0.0.0.0:9090
#åœ°å€ 127.0.0.1:9090/ui
secret: "" #å¤–éƒ¨è°ƒç”¨çš„å¯†é’¥
external-ui: "./dashboard" # å¤–éƒ¨ç”¨æˆ·ç•Œé¢ è·¯å¾„
#external-ui-name: "MetaCubeXD" 
#è‡ªå®šä¹‰å¤–éƒ¨ç”¨æˆ·ç•Œé¢åå­—ï¼Œåˆå¹¶ä¸º external-ui/external-ui-name
#éå¿…é¡»ï¼Œæ›´æ–°æ—¶ä¼šæ›´æ–°åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ï¼Œä¸é…ç½®åˆ™ç›´æ¥æ›´æ–°åˆ° external-ui ç›®å½•
external-ui-url: "https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip" # è‡ªå®šä¹‰å¤–éƒ¨ç”¨æˆ·ç•Œé¢ä¸‹è½½åœ°å€,æ­¤å¤„metacubexd
enable-process: true
find-process-mode: strict
global-client-fingerprint: chrome
#global-ua: "Mozilla/5.0; AppleWebKit/537.36; Chrome/91.0.4472.114; Safari/537.36; Shadowrocket/1.9.7; meta/1.0.0; Sing/1.1.0" # å…¨å±€ UA ,é»˜è®¤clash.meta
keep-alive-interval: 30
#æ§åˆ¶ Clash å‘å‡º TCP Keep Alive åŒ…çš„é—´éš”ï¼Œå‡å°‘ç§»åŠ¨è®¾å¤‡è€—ç”µé—®é¢˜çš„ä¸´æ—¶æªæ–½ã€‚
#TCP Keep Alive é—´éš”,å•ä½åˆ†é’Ÿã€‚æ­¤æ—¶ Clash å‘ç°å¹¶å…³é—­ä¸€ä¸ªæ— æ•ˆ TCP è¿æ¥ç”¨æ—¶ï¼š 1*keep-alive-interval + 9*keep-alive-interval
#####################
#ä¿®æ”¹é…ç½®æ–‡ä»¶æ—¶ï¼Œå»ºè®®å…ˆåœæ­¢æ¨¡å—æœåŠ¡ï¼Œå†è¿›è¡Œä¿å­˜.
#####################
geox-url:
#  geoip: "https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geoip.dat"
  geosite: "https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geosite.dat"
#  mmdb: "https://github.com/Loyalsoldier/geoip/releases/latest/download/country.mmdb"
  geoip: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.db"
#  geosite: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country-lite.mmdb"
geo-auto-update: false # è‡ªåŠ¨æ›´æ–° GEO æ˜¯å¦å¯ç”¨,å¯é€‰ true/false
geo-update-interval: 72 # æ›´æ–°é—´éš”,å•ä½å°æ—¶

profile:
  store-selected: true
  store-fake-ip: true

sniffer:
  enable: true
  sniff:
    TLS:
      ports: [443, 8443]
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    QUIC:
      ports: [443, 8443]
  force-domain:
    - "+.netflix.com"
    - "+.nflxvideo.net"
    - "+.amazonaws.com"
    - "+.media.dssott.com"
  skip-domain:
    - "+.apple.com"
    - Mijia Cloud
    - dlg.io.mi.com
    - "+.jd.com"
    - "+.taobao.com"
    - "+.tmall.com"
    - "*.rc.sunlogin.net"

tun:
  enable: false
  device: tun0
  stack: system
  dns-hijack:
    - 'any:53'
    - 'tcp://any:53'
  auto-route: true
  auto-detect-interface: true
  
dns:
  enable: true
  prefer-h3: true
  listen: 0.0.0.0:1053
  ipv6: true
  enhanced-mode: fake-ip
#enhanced-modeå¯é€‰ redir-host å’Œ fake-ipï¼Œfake-ipå“åº”æ›´å¿«ä½†å¯èƒ½å¸¦æ¥ä¸€äº›é—®é¢˜
  fake-ip-range: 198.18.0.1/16
#é»˜è®¤ DNS, ç”¨äºè§£æ DNS æœåŠ¡å™¨ çš„åŸŸåï¼Œæ¢ç”¨IPæ ¼å¼DOHååº”è¯¥å¯å»é™¤ã€‚
#  default-nameserver:
#    - 223.5.5.5
#    - 119.29.29.29
  nameserver-policy:
    'geosite:cn,private':
      - "https://223.5.5.5/dns-query"
      - "https://120.53.53.53/dns-query"
  nameserver:
#    - 119.29.29.29
#    - 223.5.5.5
#    - https://doh.pub/dns-query
#    - https://dns.alidns.com/dns-query
    - https://223.5.5.5/dns-query
    - https://120.53.53.53/dns-query
#æ¢æˆIPæ ¼å¼çš„DOHï¼Œåˆ†åˆ«æ˜¯aliå’Œdnspod
  fallback:
#    - https://doh.dns.sb/dns-query
#    - https://dns.google/dns-query
#    - https://cloudflare-dns.com/dns-query
    - "https://8.8.4.4/dns-query#ğŸ¯ æ€»æ¨¡å¼"
    - "https://1.1.1.1/dns-query#ğŸ¯ æ€»æ¨¡å¼"
#å¦‚éœ€è¿‡ä»£ç†æŸ¥è¯¢ï¼Œåº”é…ç½® proxy-server-nameserver, ä»¥é˜²å‡ºç°é¸¡è›‹é—®é¢˜
  proxy-server-nameserver:
    - https://120.53.53.53/dns-query
#åŠ è½½å¤–ç½‘å¡é¡¿å’Œæ…¢çš„ï¼Œå»æ‰fallbackç»„å¯æ”¹å–„
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
    - 0.0.0.0/8
    - 10.0.0.0/8
    - 100.64.0.0/10
    - 127.0.0.0/8
    - 169.254.0.0/16
    - 172.16.0.0/12
    - 192.0.0.0/24
    - 192.0.2.0/24
    - 192.88.99.0/24
    - 192.168.0.0/16
    - 198.18.0.0/15
    - 198.51.100.0/24
    - 203.0.113.0/24
    - 224.0.0.0/4
    - 240.0.0.0/4
    - 255.255.255.255/32
    domain:
    - "+.google.com"
    - "+.facebook.com"
    - "+.youtube.com"
    - "+.githubusercontent.com"
    - "+.googlevideo.com"
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    - "+.linkedin.com"
  fake-ip-filter:
    - "*.lan"
    - "*.localdomain"
    - "*.example"
    - "*.invalid"
    - "*.localhost"
    - "*.test"
    - "*.local"
    - "*.home.arpa"
    - 'connect.rom.miui.com'
    - time.*.com
    - time.*.gov
    - time.*.edu.cn
    - time.*.apple.com
    - time-ios.apple.com
    - time1.*.com
    - time2.*.com
    - time3.*.com
    - time4.*.com
    - time5.*.com
    - time6.*.com
    - time7.*.com
    - ntp.*.com
    - ntp1.*.com
    - ntp2.*.com
    - ntp3.*.com
    - ntp4.*.com
    - ntp5.*.com
    - ntp6.*.com
    - ntp7.*.com
    - "*.time.edu.cn"
    - "*.ntp.org.cn"
    - "+.pool.ntp.org"
    - time1.cloud.tencent.com
    - music.163.com
    - "*.music.163.com"
    - "*.126.net"
    - musicapi.taihe.com
    - music.taihe.com
    - songsearch.kugou.com
    - trackercdn.kugou.com
    - "*.kuwo.cn"
    - api-jooxtt.sanook.com
    - api.joox.com
    - joox.com
    - y.qq.com
    - "*.y.qq.com"
    - streamoc.music.tc.qq.com
    - mobileoc.music.tc.qq.com
    - isure.stream.qqmusic.qq.com
    - dl.stream.qqmusic.qq.com
    - aqqmusic.tc.qq.com
    - amobile.music.tc.qq.com
    - "*.xiami.com"
    - "*.music.migu.cn"
    - music.migu.cn
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    - localhost.ptlogin2.qq.com
    - localhost.sec.qq.com
    - "+.qq.com"
    - "+.tencent.com"
    - "+.srv.nintendo.net"
    - "*.n.n.srv.nintendo.net"
    - "+.stun.playstation.net"
    - xbox.*.*.microsoft.com
    - "*.*.xboxlive.com"
    - xbox.*.microsoft.com
    - xnotify.xboxlive.com
    - "+.battlenet.com.cn"
    - "+.wotgame.cn"
    - "+.wggames.cn"
    - "+.wowsgame.cn"
    - "+.wargaming.net"
    - proxy.golang.org
    - stun.*.*
    - stun.*.*.*
    - "+.stun.*.*"
    - "+.stun.*.*.*"
    - "+.stun.*.*.*.*"
    - "+.stun.*.*.*.*.*"
    - heartbeat.belkin.com
    - "*.linksys.com"
    - "*.linksyssmartwifi.com"
    - "*.router.asus.com"
    - mesu.apple.com
    - swscan.apple.com
    - swquery.apple.com
    - swdownload.apple.com
    - swcdn.apple.com
    - swdist.apple.com
    - lens.l.google.com
    - stun.l.google.com
    - "+.nflxvideo.net"
    - "*.square-enix.com"
    - "*.finalfantasyxiv.com"
    - "*.ffxiv.com"
    - "*.ff14.sdo.com"
    - ff.dorado.sdo.com
    - "*.mcdn.bilivideo.cn"
    - "+.media.dssott.com"
    - shark007.net
    - Mijia Cloud
    - "+.cmbchina.com"
    - "+.cmbimg.com"
    - local.adguard.org
    - "+.sandai.net"
    - "+.n0808.com"
    - services.googleapis.cn

##å‹¿åŠ¨ï¼Œå¼•ç”¨
p: &p
  {type: http, interval: 86400, health-check: {enable: true, url: https://www.gstatic.com/generate_204, interval: 300}}
u: &u
  use:
  - æœºåœº1
  - æœºåœº2

proxy-providers:
  æœºåœº1:
    <<: *p
    url: "http://106.75.143.245:3390/api/v1/client/subscribe?token=4b83c9b85ffb9cf06d86fe5bf1a05d1c"
    path: ./proxy_providers/sub1.yaml
    #æ³¨æ„ï¼å¦‚æœæ‚¨çš„è®¢é˜…é“¾æ¥ä¸­å¸¦æœ‰â€œ&â€å­—ç¬¦ï¼Œè¯·åˆ æ‰.
  æœºåœº2:
    <<: *p
    url: "è®¢é˜…åœ°å€2"
    path: ./proxy_providers/sub2.yaml
    #exclude-filter: "å‰©ä½™æµé‡|é‡ç½®|åˆ°æœŸ"
    #æ³¨æ„ï¼å¦‚æœæ‚¨çš„è®¢é˜…é“¾æ¥ä¸­å¸¦æœ‰â€œ&â€å­—ç¬¦ï¼Œè¯·åˆ æ‰.

proxy-groups:
  - {name: ğŸ¯ æ€»æ¨¡å¼, type: select, pr